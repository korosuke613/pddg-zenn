---
title: "サービスが落ちる要因"
---

サーバが一つしか無いと仮定し、サービスが落ちる原因について考える。
外部要因を除くと以下の様な物が考えられる。

- ハードウェア起因
  - 物理マシンの故障
    - 例：電源が故障し、動かなくなった
- パフォーマンス起因
  - 用意したコンピューティングリソースの許容量を超える負荷
    - 例：1コアしかないサーバで提供しているサービスに秒間数百万リクエストが来た
  - プログラムの計算量に起因する予期しない過負荷
    - 例：`O(n^2)` のアルゴリズムを使っていたことで一部のユーザのリクエストの処理量が爆発した
- メンテナンス起因
  - アプリケーションの更新に伴うプロセスの再起動
    - 例：APIサーバの新しいバージョンを適用するために動いているサービスを止め新しいバージョンで立ち上げ直した
  - OSやライブラリの更新に伴うOSの再起動
    - 例：Ubuntu 20.04のサポートが切れたのでUbuntu 22.04への更新をした
  - 物理マシンのファームウェアアップデート
    - 例：サーバのBIOSのバージョンに脆弱性が見つかったので更新するためマシンを再起動した

ここではメンテナンス起因に着目する。これらは必ず生じる。
脆弱性を残したままではサービスに攻撃されて結果としてユーザからの信頼を失うため、必ずメンテナンスは行わなければならない。
しかし、メンテナンスは基本的にサービスの停止を伴う。プロセスの再起動だけでなく、マシン自体の再起動が必要なケースもある。

